<br>
<br>
<br>
<br>
<form #f="ngForm" (ngSubmit)="onSubmit(f.value, f)" [formGroup]="registerForm">
  <div *ngFor="let field of formFields; let i=index" >
      <mat-form-field appearance="fill" *ngIf="field.type.name == 'string'">
        <mat-label>{{field.label}}</mat-label>
        <input matInput formControlName={{field.id}} required type="text" name={{field.id}} ngModel>
        <mat-error *ngIf="registerForm.controls[field.id].hasError('required')">
          {{field.id}} is <strong>required</strong>
        </mat-error>  
        <mat-error *ngIf="registerForm.controls[field.id].hasError('minlength')">
          {{field.id}} must be <strong>longer</strong> than {{registerForm.controls[field.id].errors.minlength.requiredLength}}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" *ngIf="field.type.name == 'string_email'">
        <mat-label>{{field.label}}</mat-label>
        <input matInput formControlName={{field.id}} required type="email" name={{field.id}} ngModel>
        <mat-error *ngIf="registerForm.controls[field.id].hasError('required')">
          {{field.id}} is <strong>required</strong>
        </mat-error>  
        <mat-error *ngIf="registerForm.controls[field.id].hasError('minlength')">
          {{field.id}} must be <strong>longer</strong> than {{registerForm.controls[field.id].errors.minlength.requiredLength}}
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill" *ngIf="field.type.name == 'string_password'">
        <mat-label>{{field.label}}</mat-label>
        <input matInput formControlName={{field.id}} required type="password" name={{field.id}} ngModel>
        <mat-error *ngIf="registerForm.controls[field.id].hasError('required')">
          {{field.id}} is <strong>required</strong>
        </mat-error>  
        <mat-error *ngIf="registerForm.controls[field.id].hasError('minlength')">
          {{field.id}} must be <strong>longer</strong> than {{registerForm.controls[field.id].errors.minlength.requiredLength}}
        </mat-error>
      </mat-form-field>

      <div *ngIf="field.type.name=='boolean'">
        <br>
        <mat-checkbox formControlName={{field.id}} name={{field.id}} ngModel>
          {{field.label}}
        </mat-checkbox>
      </div>


      <div *ngIf="field.type.name.includes('multipleEnum')" formGroupName={{field.id}}>
        <br>
        <mat-card style="width:max-content;">
          <mat-card-header>
            <mat-card-title>
              {{field.label}}
            </mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <ul style="list-style-type:none;">
              <div *ngFor="let element of enumValues| keyvalue">
                <div *ngIf="element.key == field.id">
                  <li *ngFor="let genre of element.value">
                    <mat-checkbox [formControlName]="genre">
                      {{field.type.values[genre]}}
                    </mat-checkbox>
                  </li>
                </div>
              </div>
            </ul>
          </mat-card-content>
        </mat-card>
        <br>
      </div>
      
  </div>
  
  <button mat-raised-button color="primary" type="submit" [disabled]="f.form.invalid">Submit</button>
</form>
<br>
<br>
<br>
<br>